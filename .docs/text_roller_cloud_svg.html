<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.6/dist/umd/ffmpeg.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  </head>
  <style>
    @keyframes animation {
      0%,
      100% {
        top: 0;
      }
      20% {
        top: 0;
      }
      25% {
        top: -30px;
      }
      45% {
        top: -30px;
      }
      50% {
        top: -60px;
      }
      70% {
        top: -60px;
      }
    }

    #downloadBtn {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 9999;
      padding: 8px 14px;
      font-size: 14px;
      border: none;
      background: black;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      opacity: 0.85;
    }
  </style>

  <body
    style="
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
        'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
    "
  >
    <button id="downloadBtn" onclick="recordFullComposite(3)">
      Download Animated WebP
    </button>
    <div
      id="frame"
      style="
        width: 512px;
        height: 512px;
        background-color: #fff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
      "
    >
      <canvas
        id="c"
        width="512"
        height="512"
        style="position: absolute; top: 0; left: 0; z-index: 0"
      ></canvas
      ><canvas id="hidden" style="display: none"></canvas>

      <h1
        style="
          margin: 0;
          padding: 0;
          font-size: 28px;
          text-align: center;
          position: relative;
          z-index: 1;
        "
      >
        <span style="display: inline-flex; align-items: center; gap: 0">
          <svg
            width="70.2"
            height="28"
            viewBox="0 0 351 90"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M122.604 89.6974C115.697 89.6974 109.041 87.1857 105.148 80.5299H102.887V87.8137H87.1895V1.16162H102.887V32.6829H105.148C109.166 25.7758 116.701 23.1386 123.483 23.1386C140.436 23.1386 151.865 36.7015 151.865 55.7901C151.865 75.2554 139.306 89.6974 122.604 89.6974ZM119.213 75.6321C128.883 75.6321 135.79 67.7204 135.79 56.418C135.79 45.1156 128.757 37.2038 119.213 37.2038C109.794 37.2038 102.887 44.7388 102.887 56.418C102.887 68.0972 109.794 75.6321 119.213 75.6321ZM180.874 89.6974C168.818 89.6974 159.023 82.4136 159.023 70.4833C159.023 56.418 169.823 51.897 182.883 50.5156L201.344 48.6319V45.1156C201.344 39.7155 196.949 35.948 189.163 35.948C181.753 35.948 177.483 39.2132 176.102 44.1109H161.032C162.539 32.1805 172.46 23.1386 189.163 23.1386C205.237 23.1386 215.912 30.9247 215.912 46.1202V76.7624C215.912 80.6555 216.288 86.0555 216.54 87.5625V87.8137H201.47C201.344 85.6788 201.344 83.6694 201.344 81.5345H199.084C195.191 87.8137 188.409 89.6974 180.874 89.6974ZM185.144 77.8926C195.442 77.8926 201.344 70.1065 201.344 62.1948V59.0552L187.53 60.6878C178.99 61.6925 174.846 64.2041 174.846 69.7298C174.846 74.8786 179.116 77.8926 185.144 77.8926ZM253.586 89.6974C237.763 89.6974 226.461 81.7857 224.702 69.353H240.149C241.907 74.8786 247.684 77.2647 253.712 77.2647C259.866 77.2647 264.889 74.6275 264.889 69.9809C264.889 65.3344 260.117 64.0785 253.586 62.9483L246.931 61.8181C234.372 59.6831 226.586 54.4087 226.586 43.1062C226.586 30.7991 237.386 23.1386 252.331 23.1386C266.898 23.1386 276.568 29.9201 279.205 41.7248H264.135C262.377 37.0783 257.731 35.1945 252.456 35.1945C246.051 35.1945 241.907 37.9573 241.907 41.8504C241.907 45.8691 245.172 47.1249 251.954 48.2551L258.61 49.3854C270.791 51.3947 280.084 56.418 280.084 68.5995C280.084 81.9113 269.033 89.6974 253.586 89.6974ZM319.392 89.6974C300.052 89.6974 287.243 76.5112 287.243 56.2924C287.243 36.4504 300.806 23.1386 319.517 23.1386C339.108 23.1386 350.411 37.7062 350.411 56.9203V59.6831H302.564C303.317 70.1065 310.601 76.2601 319.392 76.2601C326.676 76.2601 331.071 73.7484 333.206 69.353H349.28C346.015 81.1578 334.336 89.6974 319.392 89.6974ZM335.09 49.2598C333.834 40.8457 327.178 35.948 319.392 35.948C311.229 35.948 304.322 40.7202 302.815 49.2598H335.09Z"
              fill="#0A0B0D"
            />
            <path
              d="M4.02139 87.8138C1.50973 87.8138 0.253906 86.558 0.253906 84.0463V28.7899C0.253906 26.2783 1.50973 25.0225 4.02139 25.0225H59.2778C61.7894 25.0225 63.0452 26.2783 63.0452 28.7899V84.0463C63.0452 86.558 61.7894 87.8138 59.2778 87.8138H4.02139Z"
              fill="#0000FF"
            />
          </svg>
          <span style="font-size: 24px">.is</span>
        </span>
        <div
          style="
            margin: 0;
            padding: 0;
            height: 28px;
            line-height: 28px;
            font-size: 24px;
            text-transform: lowercase;
            overflow: hidden;
            text-align: center;
          "
        >
          <span
            style="position: relative; animation: animation 10s ease infinite"
          >
            <span style="color: blue">{number}</span><br />
            <span style="color: red">{Front-End Developer}</span><br />
            <span style="color: pink">{Back-End Developer}</span><br />
          </span>
        </div>
      </h1>
    </div>
  </body>

  <script>
    const c = document.getElementById("c");
    const ctx = c.getContext("2d");
    const h = document.getElementById("hidden");
    const hctx = h.getContext("2d");

    const img = new Image();

    // Cloud SVG (base64 encoded with position at y=-380)
    img.src =
      "data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIHNsaWNlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9InNreUdyYWRpZW50IiB4MT0iMCUiIHkxPSIxMDAlIiB4Mj0iMCUiIHkyPSIwJSI+CiAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjogIzJhMmEyYTsgc3RvcC1vcGFjaXR5OiAxIiAvPgogICAgICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiAjMWExYTFhOyBzdG9wLW9wYWNpdHk6IDEiIC8+CiAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiAjMGEwYTBhOyBzdG9wLW9wYWNpdHk6IDEiIC8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgICAgICA8ZmlsdGVyIGlkPSJmaWx0ZXItYmFzZSIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSI+CiAgICAgICAgICA8ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iMC4wMDgiIG51bU9jdGF2ZXM9IjYiIHNlZWQ9Ijg1MTciIC8+CiAgICAgICAgICA8ZmVEaXNwbGFjZW1lbnRNYXAgaW49IlNvdXJjZUdyYXBoaWMiIHNjYWxlPSIxODAiIC8+CiAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyNSIgLz4KICAgICAgICAgIDxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNBIHR5cGU9ImxpbmVhciIgc2xvcGU9IjAuOSIgLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICAgICAgPGZpbHRlciBpZD0iZmlsdGVyLWJhY2siIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgogICAgICAgICAgPGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuMDA3IiBudW1PY3RhdmVzPSI0IiBzZWVkPSI5ODIzIiAvPgogICAgICAgICAgPGZlRGlzcGxhY2VtZW50TWFwIGluPSJTb3VyY2VHcmFwaGljIiBzY2FsZT0iMTYwIiAvPgogICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMzAiIC8+CiAgICAgICAgICA8ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jQSB0eXBlPSJsaW5lYXIiIHNsb3BlPSIwLjMiIC8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgaWQ9ImZpbHRlci1taWQiIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgogICAgICAgICAgPGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuMDA5IiBudW1PY3RhdmVzPSI1IiBzZWVkPSI3NDEyIiAvPgogICAgICAgICAgPGZlRGlzcGxhY2VtZW50TWFwIGluPSJTb3VyY2VHcmFwaGljIiBzY2FsZT0iMTcwIiAvPgogICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMzUiIC8+CiAgICAgICAgICA8ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jQSB0eXBlPSJsaW5lYXIiIHNsb3BlPSIwLjIiIC8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgaWQ9ImZpbHRlci1mcm9udCIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSI+CiAgICAgICAgICA8ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iMC4wMDYiIG51bU9jdGF2ZXM9IjUiIHNlZWQ9IjYyNTEiIC8+CiAgICAgICAgICA8ZmVEaXNwbGFjZW1lbnRNYXAgaW49IlNvdXJjZUdyYXBoaWMiIHNjYWxlPSIxNDAiIC8+CiAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI0MCIgLz4KICAgICAgICAgIDxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNBIHR5cGU9ImxpbmVhciIgc2xvcGU9IjAuNCIgLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICAgIDwvZGVmcz4KICAgICAgPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNza3lHcmFkaWVudCkiIC8+CiAgICAgIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXItZnJvbnQpIj4KICAgICAgICA8ZWxsaXBzZSBjeD0iNTIwIiBjeT0iMjQwIiByeD0iNDQwIiByeT0iMTYwIiBmaWxsPSJyZ2JhKDAsIDAsIDAsIDAuMTUpIiAvPgogICAgICAgIDxlbGxpcHNlIGN4PSI0MDAiIGN5PSIyNjAiIHJ4PSIzNzAiIHJ5PSIxNTAiIGZpbGw9InJnYmEoMCwgMCwgMCwgMC4xKSIgLz4KICAgICAgICA8ZWxsaXBzZSBjeD0iNjAwIiBjeT0iMjUwIiByeD0iNDAwIiByeT0iMTU1IiBmaWxsPSJyZ2JhKDAsIDAsIDAsIDAuMTIpIiAvPgogICAgICA8L2c+CiAgICAgIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXItbWlkKSI+CiAgICAgICAgPGVsbGlwc2UgY3g9IjUyMCIgY3k9IjIwMCIgcng9IjQ3MCIgcnk9IjE2NSIgZmlsbD0icmdiYSg2NiwgMTA1LCAxNDYsIDAuMSkiIC8+CiAgICAgICAgPGVsbGlwc2UgY3g9IjQ1MCIgY3k9IjIxMCIgcng9IjQyMCIgcnk9IjE1NSIgZmlsbD0icmdiYSg2NiwgMTA1LCAxNDYsIDAuMDgpIiAvPgogICAgICAgIDxlbGxpcHNlIGN4PSI2MjAiIGN5PSIxOTUiIHJ4PSI0NTAiIHJ5PSIxNjAiIGZpbGw9InJnYmEoNjYsIDEwNSwgMTQ2LCAwLjA5KSIgLz4KICAgICAgPC9nPgogICAgICA8ZyBmaWx0ZXI9InVybCgjZmlsdGVyLWJhY2spIj4KICAgICAgICA8ZWxsaXBzZSBjeD0iMzcwIiBjeT0iMTQwIiByeD0iNDQwIiByeT0iMTYwIiBmaWxsPSJyZ2JhKDIxNSwgMjE1LCAyMTUsIDAuMTUpIiAvPgogICAgICAgIDxlbGxpcHNlIGN4PSI1MDAiIGN5PSIxMzAiIHJ4PSI0MDAiIHJ5PSIxNTUiIGZpbGw9InJnYmEoMjE1LCAyMTUsIDIxNSwgMC4xMikiIC8+CiAgICAgICAgPGVsbGlwc2UgY3g9IjYwMCIgY3k9IjE0NSIgcng9IjQyMCIgcnk9IjE1MCIgZmlsbD0icmdiYSgyMTUsIDIxNSwgMjE1LCAwLjE0KSIgLz4KICAgICAgPC9nPgogICAgICA8ZyBmaWx0ZXI9InVybCgjZmlsdGVyLWJhc2UpIj4KICAgICAgICA8ZWxsaXBzZSBjeD0iNTIwIiBjeT0iMTAwIiByeD0iNTAwIiByeT0iMTgwIiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkiIC8+CiAgICAgICAgPGVsbGlwc2UgY3g9IjQwMCIgY3k9IjExMCIgcng9IjQ2MCIgcnk9IjE2NSIgZmlsbD0icmdiYSgyNTUsIDI1NSwgMjU1LCAwLjM1KSIgLz4KICAgICAgICA8ZWxsaXBzZSBjeD0iNjIwIiBjeT0iOTUiIHJ4PSI0ODAiIHJ5PSIxNzUiIGZpbGw9InJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zOCkiIC8+CiAgICAgICAgPGVsbGlwc2UgY3g9IjUyMCIgY3k9IjcwIiByeD0iNDQwIiByeT0iMTYwIiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMzIpIiAvPgogICAgICAgIDxlbGxpcHNlIGN4PSIzMjAiIGN5PSIxMjAiIHJ4PSI0MDAiIHJ5PSIxNTAiIGZpbGw9InJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKSIgLz4KICAgICAgICA8ZWxsaXBzZSBjeD0iNzIwIiBjeT0iMTE1IiByeD0iNDIwIiByeT0iMTY1IiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMzUpIiAvPgogICAgICA8L2c+CiAgICA8L3N2Zz4=";

    img.onload = () => {
      h.width = c.width;
      h.height = c.height;
      hctx.drawImage(img, 0, 0, c.width, c.height);
      animate();
    };

    // Configuration
    const config = {
      hoverRadius: 50,
      dotFadeTime: 2000,
      dotSpacing: 8,
      dotSize: 16,
      lineStep: 4,
      cloudThreshold: 180,
      transitionZone: 40,
      colors: ["#66c800", "#fea8cd", "#3c8aff"],
    };

    let mouseX = -1000;
    let mouseY = -1000;
    const dotLastActive = new Map();

    c.addEventListener("mousemove", (e) => {
      const rect = c.getBoundingClientRect();
      mouseX = e.clientX - rect.left;
      mouseY = e.clientY - rect.top;
    });

    c.addEventListener("mouseleave", () => {
      mouseX = -1000;
      mouseY = -1000;
    });

    img.onload = () => {
      h.width = c.width;
      h.height = c.height;
      hctx.drawImage(img, 0, 0, c.width, c.height);
      animate();
    };

    function animate() {
      ctx.clearRect(0, 0, c.width, c.height);

      // Draw vertical lines with soft cloud edges
      for (let x = 0; x < c.width; x += config.lineStep) {
        const gradient = ctx.createLinearGradient(x, 0, x, c.height);

        for (let y = 0; y < c.height; y += 10) {
          const pixelData = hctx.getImageData(x, y, 1, 1).data;
          const r = pixelData[0];
          const g = pixelData[1];
          const b = pixelData[2];
          const brightness = (r + g + b) / 3;
          const a = pixelData[3] / 255;

          let lineOpacity;
          if (brightness < config.cloudThreshold - config.transitionZone) {
            lineOpacity = (brightness / 255) * a * 0.9;
          } else if (brightness >= config.cloudThreshold) {
            lineOpacity = 0;
          } else {
            const fadeAmount =
              (config.cloudThreshold - brightness) / config.transitionZone;
            lineOpacity = (brightness / 255) * a * 0.9 * fadeAmount;
          }

          gradient.addColorStop(
            y / c.height,
            `rgba(${r},${g},${b},${lineOpacity})`
          );
        }

        ctx.strokeStyle = gradient;
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, c.height);
        ctx.stroke();
      }

      const now = Date.now();

      for (let x = 0; x < c.width; x += config.dotSpacing) {
        for (let y = 0; y < c.height; y += config.dotSpacing) {
          const pixelData = hctx.getImageData(x, y, 1, 1).data;
          const brightness = (pixelData[0] + pixelData[1] + pixelData[2]) / 3;

          if (brightness >= config.cloudThreshold) continue;

          let edgeFade = 1;
          if (brightness > config.cloudThreshold - config.transitionZone) {
            edgeFade =
              (config.cloudThreshold - brightness) / config.transitionZone;
          }

          const dx = x - mouseX;
          const dy = y - mouseY;
          const distance = Math.sqrt(dx * dx + dy * dy);
          const dotKey = `${x},${y}`;
          const dotSeed = (x * 7 + y * 13) % 100;
          const variableRadius = config.hoverRadius + (dotSeed - 50) * 0.3;
          const softEdge = 20;

          if (distance < variableRadius + softEdge) {
            const activationChance =
              1 - Math.max(0, (distance - variableRadius) / softEdge);
            if (Math.random() < activationChance || distance < variableRadius) {
              dotLastActive.set(dotKey, now);
            }
          }

          const lastActive = dotLastActive.get(dotKey);
          if (lastActive && now - lastActive < config.dotFadeTime) {
            const timeSinceActive = now - lastActive;
            const colorIndex =
              Math.floor((x / c.width) * config.colors.length) %
              config.colors.length;
            const baseColor = config.colors[colorIndex];

            const r = parseInt(baseColor.slice(1, 3), 16);
            const g = parseInt(baseColor.slice(3, 5), 16);
            const b = parseInt(baseColor.slice(5, 7), 16);

            const fadeFactor =
              distance >= variableRadius
                ? Math.max(0, 1 - timeSinceActive / config.dotFadeTime)
                : 1 - (distance / variableRadius) ** 2;

            const size = (brightness / 255) * config.dotSize * fadeFactor;

            if (size > 0.5 && fadeFactor > 0.1) {
              const finalOpacity = fadeFactor * 0.3 * edgeFade;
              ctx.fillStyle = `rgba(${r},${g},${b},${finalOpacity})`;
              ctx.beginPath();
              ctx.arc(x, y, size / 2, 0, Math.PI * 2);
              ctx.fill();
            }
          } else if (lastActive) {
            dotLastActive.delete(dotKey);
          }
        }
      }

      requestAnimationFrame(animate);
    }

    async function recordFullComposite(seconds = 3) {
      const { createFFmpeg, fetchFile } = FFmpeg;
      const ffmpeg = createFFmpeg({ log: true });

      if (!ffmpeg.isLoaded()) {
        await ffmpeg.load();
      }

      const frame = document.getElementById("frame");
      const fps = 30;
      const totalFrames = seconds * fps;
      const frames = [];

      // 1. CAPTURE FRAMES
      for (let i = 0; i < totalFrames; i++) {
        const snap = await html2canvas(frame, {
          backgroundColor: null,
          scale: 1,
        });
        const blob = await new Promise((res) => snap.toBlob(res, "image/png"));
        frames.push(blob);
        await new Promise((r) => setTimeout(r, 1000 / fps));
      }

      // 2. WRITE FRAMES INTO FFMPEG FS
      for (let i = 0; i < frames.length; i++) {
        ffmpeg.FS("writeFile", `frame_${i}.png`, await fetchFile(frames[i]));
      }

      // 3. ENCODE ANIMATED WEBP
      await ffmpeg.run(
        "-framerate",
        String(fps),
        "-i",
        "frame_%d.png",
        "-loop",
        "0",
        "-quality",
        "90",
        "output.webp"
      );

      // 4. GET RESULT
      const data = ffmpeg.FS("readFile", "output.webp");
      const url = URL.createObjectURL(
        new Blob([data.buffer], { type: "image/webp" })
      );

      // 5. DOWNLOAD
      const a = document.createElement("a");
      a.href = url;
      a.download = "animated.webp";
      a.click();
    }
  </script>
</html>
